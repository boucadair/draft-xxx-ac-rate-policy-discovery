



scone                                                       M. Boucadair
Internet-Draft                                                    Orange
Intended status: Standards Track                                 D. Wing
Expires: 16 May 2025                                Cloud Software Group
                                                                T. Reddy
                                                                   Nokia
                                                          S. Rajagopalan
                                                    Cloud Software Group
                                                            L. Contreras
                                                              Telefonica
                                                        12 November 2024


                   Throughput Advice Object for SCONE
             draft-brw-scone-throughput-advice-blob-latest

Abstract

   Traffic exchanged over a network attachment may be subject to rate-
   limit policies.  These policies may be intentional policies (e.g.,
   enforced as part of the activation of the network attachment and
   typically agreed upon service subscription) or be reactive policies
   (e.g., enforced temporarily to manage an overload or during a DDoS
   attack mitigation).

   This document specifies a generic object that can be be used by any
   mechanim for hosts to dynamically discover Network Rate-Limit
   Policies (NRLPs).  This information is then passed to applicaitons
   that might adjust their behaviors accordingly.

Discussion Venues

   This note is to be removed before publishing as an RFC.

   Source for this draft and an issue tracker can be found at
   https://github.com/boucadair/draft-xxx-ac-rate-policy-discovery.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 16 May 2025.

Copyright Notice

   Copyright (c) 2024 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction
     1.1.  Context
     1.2.  What's Out?
     1.3.  Sample Deployment Cases
   2.  Conventions and Definitions
   3.  NRLP Blob
   4.  Security Considerations
   5.  IANA Considerations
     5.1.  Rate-Limit Policy Objects Registry Group
     5.2.  Optional Parameter Flags Registry
     5.3.  Flow Flags Registry
   6.  References
     6.1.  Normative References
     6.2.  Informative References
   Acknowledgments
   Authors' Addresses

1.  Introduction

1.1.  Context

   Connectivity services are provided by networks to customers via
   dedicated terminating points, such as customer edges (CEs) or User
   Equipment (UE).  To facilitate data transfer via the provider
   network, it is assumed that appropriate setup is provisioned over the
   links that connect customer terminating points and a provider network
   (usually via a Provider Edge (PE)), successfully allowing data
   exchange over these links.  The required setup is referred to in this
   document as network attachments, while the underlying link is
   referred to as "bearers".

   The bearer can be a physical or logical link that connects a customer
   device to a provider network.  A bearer can be a wireless or wired
   link.  The same or multiple bearer technologies can be used to
   establish the bearer (e.g., WLAN, cellular) to graft customer
   terminating points to a network.

      Network attachment is also known as "Attachment Circuit (AC)"
      which is an established concept in the industry and also in the
      IETF ([RFC4026], [RFC4664], [RFC4364], etc.).

   Figure 1 shows an example of a network that connects CEs and hosts
   (UE, for example).These CEs are servicing other (internal) hosts.
   The identification of these hosts is hidden from the network.  The
   policies enforced at the network for an AC are per-subscriber, not
   per-host.  Typically, if a CE is provided with a /56 IPv6 prefix,
   policies are enforced on that /56 not the individual /64s that will
   be used by internal hosts.  A customer terminating point may be
   serviced with one (e.g., UE#1, CE#1, and CE#3) or multiple ACs (e.g.,
   CE#2).

                                                              Hosts
                                                              O O O
                                                               \|/
      .------.                .--------------------.         .------.
      |      +------+         |                    +---AC----+      |
      | UE#1 |      |         |                    +---AC----+ CE#2 |
      '------'      +---AC----+                    |         '------'
                              |     Network        |
      .------.      .---AC----+                    |
      |      |      |         |                    |         .------.
      | CE#1 +------'         |                    +---AC----+ CE#3 |
      '------'                |                    |         '------'
         /|\                  '--------------------'            /|\
        O O O                                                  O O O
        Hosts                                                  Hosts

                    Figure 1: Sample Network Attachments

   Customer terminating points are provided with a set of information
   (e.g., IP address/prefix) to successfully be able to send and receive
   traffic over an AC.  A comprehensive list of provisioning parameters
   that are available on the PE-side of an AC is documented in
   [I-D.ietf-opsawg-ntw-attachment-circuit].

   The required set of parameters is a function of the service offering.
   For example, a very limited set of parameters is required for mass-
   market service offering while a more elaborated set is required for
   Enterprise services (e.g., Layer 2 VPN [RFC9291] or Layer 3 VPN
   [RFC9182]).  This document *leverages access control, authorization,
   and authentication mechanisms that are already in place for the
   delivery of services over these ACs*.

   In order to ensure consistent design for both IPv4 and IPv6 ACs,
   Section 3 groups the set of NRLP parameters that are returned
   independent of the address family.  This blob can be leveraged in
   networks where ND/DHCP/PvD are not used and ease the mapping with
   specific protocols used in these networks.  For example, *_a Protocol
   Configuration Option (PCO) [TS-24.008] NRLP Information Element can
   be defined in 3GPP_*.

   Whether host-to-network, network-to-host, or both policies are
   returned in an NRLP is deployment specific.  All these combinations
   are supported in this document.

   Also, the design supports returning one more NRLP instances for a
   given traffic direction.

1.2.  What's Out?

   This document does not make any assumption about the type of the
   network (fixed, cellular, etc.) that terminates an AC.

   Likewise, the document does not make any assumption about the
   services or applications that are delivered over an AC.  Whether one
   or multiple services are bound to the same AC is deployment specific.

   Applications will have access to all these NRLPs and will, thus,
   adjust their behavior as a function of scope and traffic category
   indicated in a policy (all traffic, streaming, etc.).  An application
   that couples multiple flow types will adjust each flow type to be
   consistent with the specific policy for the relevant traffic
   category.  Likewise, a host with multiple ACs may use the discovered
   NRLPs AC to decide how to distribute its flows over these ACs (prefer
   an AC to place an application session, migrate connection, etc.).
   That's said, this document does not make any recommendation about how
   a receiving host uses the discovered policy.

1.3.  Sample Deployment Cases

   Some deployment use cases for NRLP are provided below:

   *  A network may advertize an NRLP when it is overloaded, including
      when it is under attack.  The rate-limit policy is basically a
      reactive policy that is meant to adjust the behavior of connected
      hosts to better control the load during these exceptional events
      (issue with RAN resources, for example).  The mechanism can also
      be used to enrich the tools that are already available to better
      handle attack traffic close to the source [RFC9066].

   *  Discovery of intentional policy applied on ACs (peering links, CE-
      PE links, etc.) when such information is not made available during
      the service activation or when network upgrades are performed.

   *  A user may configure policies on the CPE such as securing some
      resources to a specific internal host used for gaming or video
      streaming.  The CPE can use the NRLP option to share these rate-
      limit policies to connected hosts to adjust their forwarding
      behavior.

2.  Conventions and Definitions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

   This document uses the terms defined in Section 2 of
   [I-D.ietf-opsawg-ntw-attachment-circuit] and [RFC9473].

   Also, this document makes use fo the following terms:

   Reactive policy:  Treatment given to a flow when an exceptional event
      occurs, such as diminished throughput to the host caused by radio
      interference or weak radio signal, congestion on the network
      caused by other users or other applications on the same host.

   Intentional policy:  Configured bandwidth, pps, or similar throughput
      constraints applied to a flow, application, host, or subscriber.

   Rate-limit:  Used as a generic term to refer to a policy to restrict
      the maximum bitrate of a flow.

      It can be used with or without any traffic classification.

3.  NRLP Blob

   This section defines the set of attributes that are included in an
   NRLP blob:

   Optional Parameter Flags (OPF):  These flags indicate the presence of
      some optional parameters.  The following flags are defined (from
      MSB to LSB):

      E:  When set to "1", this flag indicates the presence of Excess
         Information Rate (EIR).

         When set to "0", this flag indicates that EIR is not present.

      P:  When set to "1", this flag indicates the presence of Peak
         Information Rate (PIR).

         When set to "0", this flag indicates that PIR is not present.

      U:  Unassigned bits.  See Section 5.2.

         Unassigned bits MUST be set to zero by senders and MUST be
         ignored by receivers.

   Flow flags (FF):  These flags are used to express some generic
      properties of the flow.  The following flags are defined (from MSB
      to LSB):

      S (Scope):  1-bit field which specifies whether the policy is per
         host (when set to "1") or per subscriber (when set to "0).

      D (Direction):  1-bit flag which indicates the direction on which
         to apply the enclosed policy.

         When set to "1", this flag indicates that this policy is for
         network-to-host direction.

         When set to "0", this flag indicates that this policy is for
         host-to-network direction.

      R (Reliablity):  2-bit flag which indicates the reliability type
         of traffic on which to apply the enclosed policy.

         When set to "00b", this flag indicates that this policy is for
         unreliable traffic.

         When set to "01b", this flag indicates that this policy is for
         reliable traffic.

         When set to "10b", this flag indicates that this policy is for
         both reliable and unreliable traffic.

         No meaning is associated with setting the field to "11b".  Such
         value MUST be silently ignored by the receiver.

      U:  Unassigned bits.  See Section 5.3.

         Unassigned bits MUST be set to zero by senders and MUST be
         ignored by receivers.

   TC (Traffic Category):  6-bit field which specifies a traffic
      category to which this policy applies.

      The following values are supported:

      *  "0": All traffic.  This is the default value.

      *  "1": Streaming

      *  "2": Real-time

      *  "3": Bulk traffic

      *  4-63: Unassigned values

   Committed Information Rate (CIR) (Mbps):  Specifies the maximum
      number of bits that a network can receive or send during one
      second over an AC for a traffic category.

      If set to 0, this indicates to the host that an alternate path (if
      any) should be preferred over this one.

      This parameter is mandatory.

   Committed Burst Size (CBS) (bytes):  Specifies the maximum burst size
      that can be transmitted at CIR.

      MUST be greater than zero.

      This parameter is mandatory.

   Excess Information Rate (EIR) (Mbps):  MUST be present only if the E
      flag is set to '1'.

      Specifies the maximum number of bits that a network can receive or
      send during one second over an AC for a traffic category that is
      out of profile.

      This parameter is optional.

   Excess Burst Size (EBS) (bytes):  MUST be present only if EIR is also
      present.

      Indicates the maximum excess burst size that is allowed while not
      complying with the CIR.

      MUST be greater than zero, if present.

      This parameter is optional.

   Peak Information Rate (PIR) (Mbps):  MUST be present only if P flag
      is set to '1'.

      Traffic that exceeds the CIR and the CBS is metered to the PIR.

      This parameter is optional.

   Peak Burst Size (PBS) (bytes):  MUST be present only if PIR is also
      present.

      Specifies the maximum burst size that can be transmitted at PIR.

      MUST be greater than zero, if present.

   The reader should refer to [RFC2697], [RFC2698], and [RFC4115] for
   examples of how various combinations of CIR/CBS/EIR/EBS/PIR/PBS are
   used for policing.  Typically:

   *  A Single-Rate, Three-Color Marker [RFC2697] uses CIR, CBS, and
      EBS.

   *  A Dual-Rate, Three-Color Marker [RFC2698] uses CIR, CBS, PIR, and
      PBS.

4.  Security Considerations

   An attacker who has access to the XXXX exchanged over an AC may:

   Decrease the bitrate:  This may lower the perceived QoS if the host
      aggressively lowers its transmission rate.

   Increase the bitrate value:  The AC will be overloaded, but still the
      rate-limit at the network will discard excess traffic.

5.  IANA Considerations

5.1.  Rate-Limit Policy Objects Registry Group

   This document requests IANA to create a new registry group entitled
   "Rate-Limit Policy Objects".

5.2.  Optional Parameter Flags Registry

   This document requests IANA to create a new registry entitled
   "Optional Parameter Flags" under the "Rate-Limit Policy Objects"
   registry group (Section 5.1).

   The initial values of this registry is provided in Table 1.

              +==============+=============+===============+
              | Bit Position | Description | Reference     |
              +==============+=============+===============+
              | 1            | E-flag      | This-Document |
              +--------------+-------------+---------------+
              | 2            | P-flag      | This-Document |
              +--------------+-------------+---------------+
              | 3            | Unassigned  |               |
              +--------------+-------------+---------------+
              | 4            | Unassigned  |               |
              +--------------+-------------+---------------+

                    Table 1: Optional Parameter Flags

   The allocation policy of this new registry is "IETF Review"
   (Section 4.8 of [RFC8126]).

5.3.  Flow Flags Registry

   This document requests IANA to create a new registry entitled "Flow
   flags" under the "Rate-Limit Policy Objects" registry group
   (Section 5.1).

   The initial values of this registry is provided in Table 2.

         +==============+=======================+===============+
         | Bit Position | Description           | Reference     |
         +==============+=======================+===============+
         | 1            | Scope (S) Flag        | This-Document |
         +--------------+-----------------------+---------------+
         | 2            | Direction (D) Flag    | This-Document |
         +--------------+-----------------------+---------------+
         | 3-4          | Reliability (R) Flags | This-Document |
         +--------------+-----------------------+---------------+
         | 5            | Unassigned            |               |
         +--------------+-----------------------+---------------+
         | 6            | Unassigned            |               |
         +--------------+-----------------------+---------------+

                           Table 2: Flow flags

   The allocation policy of this new registry is "IETF Review"
   (Section 4.8 of [RFC8126]).

6.  References

6.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/rfc/rfc2119>.

   [RFC8126]  Cotton, M., Leiba, B., and T. Narten, "Guidelines for
              Writing an IANA Considerations Section in RFCs", BCP 26,
              RFC 8126, DOI 10.17487/RFC8126, June 2017,
              <https://www.rfc-editor.org/rfc/rfc8126>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/rfc/rfc8174>.

6.2.  Informative References

   [app-measurement]
              Gurel, Z. and A. C. Begen, "Bandwidth measurement for
              QUIC", 2024, <https://datatracker.ietf.org/doc/slides-119-
              moq-bandwidth-measurement-for-quic/>.

   [BEREC]    BEREC, "All you need to know about Net Neutrality rules in
              the EU", <https://www.berec.europa.eu/en/all-you-need-to-
              know-about-net-neutrality-rules-in-the-eu-0>.

   [FCC]      FCC, "FCC Restores Net Neutrality",
              <https://www.fcc.gov/document/fcc-restores-net-neutrality-
              0>.

   [I-D.ietf-opsawg-ntw-attachment-circuit]
              Boucadair, M., Roberts, R., de Dios, O. G., Barguil, S.,
              and B. Wu, "A Network YANG Data Model for Attachment
              Circuits", Work in Progress, Internet-Draft, draft-ietf-
              opsawg-ntw-attachment-circuit-14, 7 November 2024,
              <https://datatracker.ietf.org/doc/html/draft-ietf-opsawg-
              ntw-attachment-circuit-14>.

   [RFC2697]  Heinanen, J. and R. Guerin, "A Single Rate Three Color
              Marker", RFC 2697, DOI 10.17487/RFC2697, September 1999,
              <https://www.rfc-editor.org/rfc/rfc2697>.

   [RFC2698]  Heinanen, J. and R. Guerin, "A Two Rate Three Color
              Marker", RFC 2698, DOI 10.17487/RFC2698, September 1999,
              <https://www.rfc-editor.org/rfc/rfc2698>.

   [RFC4026]  Andersson, L. and T. Madsen, "Provider Provisioned Virtual
              Private Network (VPN) Terminology", RFC 4026,
              DOI 10.17487/RFC4026, March 2005,
              <https://www.rfc-editor.org/rfc/rfc4026>.

   [RFC4115]  Aboul-Magd, O. and S. Rabie, "A Differentiated Service
              Two-Rate, Three-Color Marker with Efficient Handling of
              in-Profile Traffic", RFC 4115, DOI 10.17487/RFC4115, July
              2005, <https://www.rfc-editor.org/rfc/rfc4115>.

   [RFC4364]  Rosen, E. and Y. Rekhter, "BGP/MPLS IP Virtual Private
              Networks (VPNs)", RFC 4364, DOI 10.17487/RFC4364, February
              2006, <https://www.rfc-editor.org/rfc/rfc4364>.

   [RFC4664]  Andersson, L., Ed. and E. Rosen, Ed., "Framework for Layer
              2 Virtual Private Networks (L2VPNs)", RFC 4664,
              DOI 10.17487/RFC4664, September 2006,
              <https://www.rfc-editor.org/rfc/rfc4664>.

   [RFC9066]  Reddy.K, T., Boucadair, M., Ed., and J. Shallow,
              "Distributed Denial-of-Service Open Threat Signaling
              (DOTS) Signal Channel Call Home", RFC 9066,
              DOI 10.17487/RFC9066, December 2021,
              <https://www.rfc-editor.org/rfc/rfc9066>.

   [RFC9182]  Barguil, S., Gonzalez de Dios, O., Ed., Boucadair, M.,
              Ed., Munoz, L., and A. Aguado, "A YANG Network Data Model
              for Layer 3 VPNs", RFC 9182, DOI 10.17487/RFC9182,
              February 2022, <https://www.rfc-editor.org/rfc/rfc9182>.

   [RFC9291]  Boucadair, M., Ed., Gonzalez de Dios, O., Ed., Barguil,
              S., and L. Munoz, "A YANG Network Data Model for Layer 2
              VPNs", RFC 9291, DOI 10.17487/RFC9291, September 2022,
              <https://www.rfc-editor.org/rfc/rfc9291>.

   [RFC9473]  Enghardt, R. and C. Krähenbühl, "A Vocabulary of Path
              Properties", RFC 9473, DOI 10.17487/RFC9473, September
              2023, <https://www.rfc-editor.org/rfc/rfc9473>.

   [TR-470]   BBF, "5G Wireless Wireline Convergence Architecture -
              Issue 2",
              <https://www.broadband-forum.org/pdfs/tr-470-2-0-0.pdf>.

   [TS-23.503]
              3GPP, "TS 23.503: Policy and charging control framework
              for the 5G System (5GS)", 2024,
              <https://portal.3gpp.org/desktopmodules/Specifications/
              SpecificationDetails.aspx?specificationId=3334>.

   [TS-24.008]
              3GPP, "Technical Specification Group Core Network and
              Terminals; Mobile radio interface Layer 3 specification;
              Core network protocols; Stage 3 (Release 18)", 2024,
              <https://www.3gpp.org/DynaReport/24008.htm>.

   [TS-29.522]
              3GPP, "TS 29.522: 5G System; Network Exposure Function
              Northbound APIs", 2024,
              <https://portal.3gpp.org/desktopmodules/Specifications/
              SpecificationDetails.aspx?specificationId=3437>.

Acknowledgments

   TBC.

Authors' Addresses

   Mohamed Boucadair
   Orange
   Email: mohamed.boucadair@orange.com


   Dan Wing
   Cloud Software Group Holdings, Inc.
   United States of America
   Email: danwing@gmail.com


   Tirumaleswar Reddy
   Nokia
   India
   Email: kondtir@gmail.com


   Sridharan Rajagopalan
   Cloud Software Group Holdings, Inc.
   United States of America
   Email: sridharan.girish@gmail.com


   Luis M. Contreras
   Telefonica
   Spain
   Email: luismiguel.contrerasmurillo@telefonica.com
